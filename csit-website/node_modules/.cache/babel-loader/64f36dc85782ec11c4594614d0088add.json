{"ast":null,"code":"var _jsxFileName = \"G:\\\\INTERNSHIPFILES\\\\CodingFolder\\\\csit-website\\\\src\\\\Components\\\\MainMap.js\";\nimport React from 'react';\nimport mapboxgl from 'mapbox-gl';\nmapboxgl.accessToken = 'pk.eyJ1IjoiYXF1YWltcGFjdCIsImEiOiJja2R0d2N3emswdzlwMnptcGliNTk4ZHNkIn0.jPYEzZD-aErgL25Zx9N_Kg';\nlet map;\n\nclass MainMap extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lng: 103.851959,\n      lat: 1.290270,\n      zoom: 9.5,\n      movements: []\n    };\n    this.mapContainer = React.createRef();\n  }\n\n  componentDidMount() {}\n\n  componentDidUpdate() {\n    if (this.props.profile.length > 0 && this.props.movement.length > 0) {\n      // console.log(this.props.profile)\n      // timeformat: [this.convertDate(movement.datetimeEntered),this.convertDate(movement.datetimeLeft)]\n      let mappedResults = this.props.profile.map(x => {\n        return {\n          profile: x,\n          movements: this.props.movement.filter(xx => xx.suspectId == x.id)\n        };\n      });\n      mappedResults.forEach(e => {\n        let UPoints = e.movements.map(x => {\n          return {\n            'type': 'Feature',\n            'properties': {\n              'movementID': x.id,\n              'enter': x.datetimeEntered,\n              'leave': x.datetimeLeft,\n              'description': `<strong>${x.locationShortaddress}</strong><p>Time Entered: ${this.getDatetime(x.datetimeEntered, 't')}</p><p>Time Left: ${this.getDatetime(x.datetimeLeft, 't')}</p><p>Date: ${this.getDatetime(x.datetimeLeft, 'd')}</p>`\n            },\n            'geometry': {\n              'type': 'Point',\n              'coordinates': [x.locationLong, x.locationLat]\n            }\n          };\n        });\n        console.log(UPoints);\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        position: \"relative\",\n        height: \"300px\",\n        width: \"100%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      ref: el => this.mapContainer = el,\n      style: {\n        position: \"reletive\",\n        width: \"inherit\",\n        height: \"inherit\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nexport default MainMap;","map":{"version":3,"sources":["G:/INTERNSHIPFILES/CodingFolder/csit-website/src/Components/MainMap.js"],"names":["React","mapboxgl","accessToken","map","MainMap","Component","constructor","props","state","lng","lat","zoom","movements","mapContainer","createRef","componentDidMount","componentDidUpdate","profile","length","movement","mappedResults","x","filter","xx","suspectId","id","forEach","e","UPoints","datetimeEntered","datetimeLeft","locationShortaddress","getDatetime","locationLong","locationLat","console","log","render","position","height","width","el"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;AAEAA,QAAQ,CAACC,WAAT,GAAuB,+FAAvB;AAEA,IAAIC,GAAJ;;AAEA,MAAMC,OAAN,SAAsBJ,KAAK,CAACK,SAA5B,CAAqC;AAEjCC,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;AAEA,SAAKC,KAAL,GAAa;AACTC,MAAAA,GAAG,EAAE,UADI;AAETC,MAAAA,GAAG,EAAE,QAFI;AAGTC,MAAAA,IAAI,EAAE,GAHG;AAITC,MAAAA,SAAS,EAAC;AAJD,KAAb;AAOA,SAAKC,YAAL,GAAoBb,KAAK,CAACc,SAAN,EAApB;AACH;;AAEDC,EAAAA,iBAAiB,GAAE,CAElB;;AAEDC,EAAAA,kBAAkB,GAAE;AAEhB,QAAG,KAAKT,KAAL,CAAWU,OAAX,CAAmBC,MAAnB,GAA4B,CAA5B,IAAiC,KAAKX,KAAL,CAAWY,QAAX,CAAoBD,MAApB,GAA6B,CAAjE,EAAmE;AAE/D;AAEA;AACA,UAAIE,aAAa,GAAG,KAAKb,KAAL,CAAWU,OAAX,CAAmBd,GAAnB,CAAuBkB,CAAC,IAAI;AAC5C,eAAO;AACHJ,UAAAA,OAAO,EAAEI,CADN;AAEHT,UAAAA,SAAS,EAAE,KAAKL,KAAL,CAAWY,QAAX,CAAoBG,MAApB,CAA2BC,EAAE,IAAIA,EAAE,CAACC,SAAH,IAAgBH,CAAC,CAACI,EAAnD;AAFR,SAAP;AAIH,OALmB,CAApB;AAOAL,MAAAA,aAAa,CAACM,OAAd,CAAsBC,CAAC,IAAI;AACvB,YAAIC,OAAO,GAAGD,CAAC,CAACf,SAAF,CAAYT,GAAZ,CAAgBkB,CAAC,IAAI;AAC/B,iBAAO;AACH,oBAAQ,SADL;AAEH,0BAAc;AACV,4BAAcA,CAAC,CAACI,EADN;AAEV,uBAASJ,CAAC,CAACQ,eAFD;AAGV,uBAASR,CAAC,CAACS,YAHD;AAIV,6BACK,WAAUT,CAAC,CAACU,oBAAqB,6BAA4B,KAAKC,WAAL,CAAiBX,CAAC,CAACQ,eAAnB,EAAoC,GAApC,CAAyC,qBAAoB,KAAKG,WAAL,CAAiBX,CAAC,CAACS,YAAnB,EAAiC,GAAjC,CAAsC,gBAAe,KAAKE,WAAL,CAAiBX,CAAC,CAACS,YAAnB,EAAiC,GAAjC,CAAsC;AALhN,aAFX;AASH,wBAAY;AACR,sBAAQ,OADA;AAER,6BAAe,CAACT,CAAC,CAACY,YAAH,EAAiBZ,CAAC,CAACa,WAAnB;AAFP;AATT,WAAP;AAcH,SAfa,CAAd;AAiBAC,QAAAA,OAAO,CAACC,GAAR,CAAYR,OAAZ;AACH,OAnBD;AAqBH;AACJ;;AAEDS,EAAAA,MAAM,GAAE;AAEJ,wBACI;AAAK,MAAA,KAAK,EAAE;AAACC,QAAAA,QAAQ,EAAC,UAAV;AAAqBC,QAAAA,MAAM,EAAC,OAA5B;AAAqCC,QAAAA,KAAK,EAAC;AAA3C,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,GAAG,EAAEC,EAAE,IAAI,KAAK5B,YAAL,GAAoB4B,EAApC;AAAwC,MAAA,KAAK,EAAE;AAACH,QAAAA,QAAQ,EAAC,UAAV;AAAsBE,QAAAA,KAAK,EAAC,SAA5B;AAAuCD,QAAAA,MAAM,EAAC;AAA9C,OAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ;AAMH;;AAjEgC;;AAqErC,eAAenC,OAAf","sourcesContent":["import React from 'react'\r\nimport mapboxgl from 'mapbox-gl';\r\n\r\nmapboxgl.accessToken = 'pk.eyJ1IjoiYXF1YWltcGFjdCIsImEiOiJja2R0d2N3emswdzlwMnptcGliNTk4ZHNkIn0.jPYEzZD-aErgL25Zx9N_Kg';\r\n\r\nlet map\r\n\r\nclass MainMap extends React.Component{\r\n    \r\n    constructor(props){\r\n        super(props)\r\n\r\n        this.state = {\r\n            lng: 103.851959,\r\n            lat: 1.290270,\r\n            zoom: 9.5,\r\n            movements:[],\r\n        };\r\n\r\n        this.mapContainer = React.createRef();\r\n    }\r\n\r\n    componentDidMount(){\r\n       \r\n    }\r\n\r\n    componentDidUpdate(){\r\n        \r\n        if(this.props.profile.length > 0 && this.props.movement.length > 0){\r\n\r\n            // console.log(this.props.profile)\r\n\r\n            // timeformat: [this.convertDate(movement.datetimeEntered),this.convertDate(movement.datetimeLeft)]\r\n            let mappedResults = this.props.profile.map(x => {\r\n                return({\r\n                    profile: x,\r\n                    movements: this.props.movement.filter(xx => xx.suspectId == x.id)\r\n                })\r\n            })\r\n\r\n            mappedResults.forEach(e => {\r\n                let UPoints = e.movements.map(x => {\r\n                    return({\r\n                        'type': 'Feature',\r\n                        'properties': {\r\n                            'movementID': x.id,\r\n                            'enter': x.datetimeEntered,\r\n                            'leave': x.datetimeLeft,\r\n                            'description':\r\n                                `<strong>${x.locationShortaddress}</strong><p>Time Entered: ${this.getDatetime(x.datetimeEntered, 't')}</p><p>Time Left: ${this.getDatetime(x.datetimeLeft, 't')}</p><p>Date: ${this.getDatetime(x.datetimeLeft, 'd')}</p>`\r\n                            },\r\n                        'geometry': {\r\n                            'type': 'Point',\r\n                            'coordinates': [x.locationLong, x.locationLat]\r\n                        }\r\n                    })\r\n                })\r\n\r\n                console.log(UPoints)\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n    render(){\r\n\r\n        return(\r\n            <div style={{position:\"relative\",height:\"300px\", width:\"100%\"}}>\r\n                <div ref={el => this.mapContainer = el} style={{position:\"reletive\", width:\"inherit\", height:\"inherit\"}}/>\r\n            </div>\r\n            \r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default MainMap"]},"metadata":{},"sourceType":"module"}